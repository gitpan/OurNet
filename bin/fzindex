#!/usr/bin/perl

=head1 NAME

fzindex - index wrapper around OurNet::FuzzyIndex

=head1 SYNOPSIS

    % fzindex index.db *.txt

=head1 DESCRIPTION

Just run fzindex at command line. The first argument is the db file
to store index results, remaining arguments being glob patterns of
files to be indexed.

=cut

use OurNet::FuzzyIndex;

local $/;

$db = OurNet::FuzzyIndex->new(shift or die "Usage: $0 <indexfile> [files | filespec]\n");
foreach my $file (<@ARGV>) {
    next if $db->findkey($file);
    print "indexing $file...\n";
    open _, $file;
    $db->insert($file, <_> || '');
    close _;
}

1;

